<!DOCTYPE html>
<html>
<head>
    <title>Spelling Bee</title>
    <script src="shared.js"></script>
</head>
<body>
    <h1>Spelling Bee</h1>
    <div id="game-container"></div>
    
    <script>
        // Using the Web Speech API for text-to-speech instead of external audio files
        const words = ['apple', 'banana', 'orange', 'giraffe', 'elephant', 'computer', 
                      'dinosaur', 'umbrella', 'hospital', 'kangaroo'];
        
        let currentWord;
        let startTime;
        let speechSynthesis = window.speechSynthesis;
        
        function newGame() {
            currentWord = words[Math.floor(Math.random() * words.length)];
            startTime = Date.now();
            
            document.getElementById('game-container').innerHTML = `
                <p>Listen to the word and spell it:</p>
                <button onclick="speakWord()">Hear Word</button>
                <p><input type="text" id="word-input" placeholder="Type the word here"></p>
                <button onclick="checkAnswer()">Submit</button>
                <p id="result"></p>
            `;
        }
        
        function speakWord() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(currentWord);
            utterance.rate = 0.8; // Slower speed for clarity
            speechSynthesis.speak(utterance);
        }
        
        function checkAnswer() {
            const userInput = document.getElementById('word-input').value.toLowerCase();
            const isCorrect = userInput === currentWord;
            const timeSpent = (Date.now() - startTime) / 1000;
            const score = isCorrect ? Math.max(10, 100 - Math.floor(timeSpent)) : 0;
            
            document.getElementById('result').innerHTML = isCorrect 
                ? `✅ Correct!` 
                : `❌ Incorrect. The word was "${currentWord}"`;
            
            saveGameResult('game5', {
                isCorrect,
                score,
                timeSpent,
                correctWord: currentWord,
                userAnswer: userInput
            });
            
            setTimeout(newGame, 2000);
        }
        
        window.onload = newGame;
    </script>
</body>
</html>
